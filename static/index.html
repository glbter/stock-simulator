<!DOCTYPE html>
<html lang="uk">
<head>
  <title>Stock Trading Simulator</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<header>
  <h1>Stock Trading Simulator</h1>
</header>
<main>
  <div class="container">
    <div class="stock-panel">
      <h2>Trade Stock</h2>
      <input type="text" placeholder="Symbol">
      <input type="text" placeholder="Quantity">

      <select name="action" id="action">
        <option value="buy">Buy</option>
        <option value="Sell">Sell</option>
      </select>
      <button>Trade</button>
    </div>
<!--    <div class="stock-panel">-->
<!--      <h2>Sell Stock</h2>-->
<!--      <input type="text" placeholder="Symbol">-->
<!--      <input type="text" placeholder="Quantity">-->
<!--      <button>Sell</button>-->
<!--    </div>-->
  </div>
  <div class="container">
    <div class="stock-panel">
<!--      <h2>Available</h2>-->
<!--      <button>Trade</button>-->
      <button onclick="location.href='https://stocks-spa.s3.eu-central-1.amazonaws.com/implicit_grant.html';">Portfolio</button>
<!--      <input type="button" onclick="location.href='https://stocks-spa.s3.eu-central-1.amazonaws.com/implicit_grant.html';" value="Portfolio" />-->
      <!--      <ul class="stock-list" id="stockList">-->
<!--        <li>-->
<!--          <span>Stock Symbol</span>-->
<!--          <span>Quantity</span>-->
<!--        </li>-->
<!--        &lt;!&ndash; Repeat list items for each stock in the portfolio &ndash;&gt;-->
<!--      </ul>-->
    </div>
  </div>
  <div class="container">
    <div class="stock-panel">
      <h2>Available</h2>
      <ul class="stock-list" id="stockList">
        <li>
          <span>Stock Symbol</span>
          <span>Quantity</span>
        </li>
        <!-- Repeat list items for each stock in the portfolio -->
      </ul>
    </div>
  </div>
</main>


<!-- Auth0 Lock library for authentication -->
<script>
  // Function to fetch stock data and populate the list
  async function fetchStockData() {
    try {
        // Get the access token from local storage
        // const accessToken = localStorage.getItem('accessToken');

        // Fetch stock data from an API using the access token (Replace with your own API endpoint)
        // const response = await fetch('https://5nd4ve1r26.execute-api.eu-central-1.amazonaws.com/api/ticker', {mode: 'no-cors'});

      // Fetch stock data from an API using the access token (Replace with your own API endpoint)
      // const response = await fetch('https://5nd4ve1r26.execute-api.eu-central-1.amazonaws.com/api/ticker', {
      //   headers: {
      //     Authorization: 'Bearer ' + accessToken
      //   }
      // });
      //



      var data = [
        {
          "Ticker": {
            "ID": "3439d561-b4db-4455-aff9-da2119573574",
            "Name": "AAPL2",
            "Description": ""
          },
          "High": 3,
          "Low": 2,
          "Open": 4,
          "Close": 5,
          "Volume": 0,
          "DataDate": "2010-01-20T00:00:00Z"
        },
        {
          "Ticker": {
            "ID": "aad17418-6764-4ecd-90ed-bb1d7091edcc",
            "Name": "AAPL",
            "Description": ""
          },
          "High": 21,
          "Low": 19,
          "Open": 19.5,
          "Close": 20,
          "Volume": 50,
          "DataDate": "2023-05-26T00:00:00Z"
        }
      ]


      // const data = await response.json();

        // Get the stock list element
        const stockList = document.getElementById('stockList');

        // Clear any existing stock items
        stockList.innerHTML = '';

      // Create list item elements
      const listItem = document.createElement('li');
      const symbolSpan = document.createElement('span');
      const priceHighSpan = document.createElement('span');
      const changeLowSpan = document.createElement('span');

      // Set the stock data to the element text content
      symbolSpan.textContent = "Ticker";
      priceHighSpan.textContent = "High";
      changeLowSpan.textContent = "Low";

      // Append the spans to the list item
      listItem.appendChild(symbolSpan);
      listItem.appendChild(priceHighSpan);
      listItem.appendChild(changeLowSpan);

      // Append the list item to the stock list
      stockList.appendChild(listItem);

        // Iterate through the stock data and create list items
        data.forEach(stock => {
            const { symbol, price, change } = stock;

            const { Ticker, High, Low, Open, Close, Volume} = stock;
            const {ID, Name, Description} = Ticker

            // Create list item elements
            const listItem = document.createElement('li');
            const symbolSpan = document.createElement('span');
            const priceHighSpan = document.createElement('span');
            const changeLowSpan = document.createElement('span');

            // Set the stock data to the element text content
            symbolSpan.textContent = Name;
            priceHighSpan.textContent = High;
            changeLowSpan.textContent = Low;

            // Append the spans to the list item
            listItem.appendChild(symbolSpan);
            listItem.appendChild(priceHighSpan);
            listItem.appendChild(changeLowSpan);

            // Append the list item to the stock list
            stockList.appendChild(listItem);
        });
    } catch (error) {
        console.log('Error fetching stock data:', error);
    }
  }

  fetchStockData()

</script>

</body>
</html>
